# lp-consultation：プッシュと本番反映の手順

「lp-consultation にはプッシュできていない」状態を解消するための確認と手順です。

---

## 1. いまの構成の整理

| もの | 場所 |
|------|------|
| **作業しているリポジトリ** | `f:\AI\manga\cursor`（aimikata/cursor にプッシュしている想定） |
| **lp-consultation のファイル** | 上記リポジトリ内の `lp-consultation/` フォルダ |
| **本番URL** | https://lp-consultation.vercel.app/ |
| **本番のデプロイ元** | Vercel が「どの GitHub リポジトリ」と連携しているかで決まる |

**ポイント**: aimikata/cursor にプッシュしても、本番（lp-consultation.vercel.app）が**別のリポジトリ**と連携していれば、本番には反映されません。

---

### 「GitHub には LP と違うもの（ツール側）しか上がっていない・ツールの連携しかされていない」場合

**状況**: GitHub の aimikata/cursor には、LP（lp-consultation）ではなくツール用のコードだけが上がっている。Vercel の lp-consultation は「ツール用リポジトリ」にしか連携していない、または LP 用のリポジトリが別にある。

**やることの候補**:

| パターン | 内容 |
|----------|------|
| **A. cursor に lp-consultation を入れて LP もそこで管理する** | 手元の `f:\AI\manga\cursor\lp-consultation\` を **aimikata/cursor** に確実に push する。GitHub で aimikata/cursor を開き、**lp-consultation** フォルダと中身（index.html 等）があるか確認する。なければ `git add lp-consultation/` → `git commit` → `git push origin main` で送る。その後、Vercel の **lp-consultation** プロジェクトの Git 連携を **aimikata/cursor** にし、**Root Directory** を `lp-consultation` に設定する。 |
| **B. LP 用の別リポジトリがある** | LP 用の GitHub リポジトリ（例: aimikata/lp-consultation など）が別にあるなら、そのリポジトリをクローン or 開き、`f:\AI\manga\cursor\lp-consultation\` の **index.html** などをコピーして commit & push する。Vercel の lp-consultation プロジェクトは**その LP 用リポジトリ**と連携する。 |

どちらかで「本番のデプロイ元 = LP のソースがあるリポジトリ」にそろえる必要があります。

---

## 2. lp-consultation を「このリポジトリ」に確実にプッシュする

変更が aimikata/cursor に届いていない場合の手順です。**PowerShell** でリポジトリルートから実行してください。

```powershell
cd f:\AI\manga\cursor
git status
```

- `lp-consultation/` や `lp-consultation/index.html` が **Changes not staged** や **Untracked** に出ていれば、まだコミットされていません。

続けて実行：

```powershell
git add lp-consultation/
git status
```

- `lp-consultation/` が **Changes to be committed** に出ていることを確認。

```powershell
git commit -m "lp-consultation: 動画を本編に差し替え・ボタン文言更新（pCM2Dg3_iIk）"
git push origin main
```

- ここまでで、**aimikata/cursor** には lp-consultation の変更がプッシュされた状態になります。

---

## 3. 本番（lp-consultation.vercel.app）に反映させる

本番は「Vercel の **lp-consultation** プロジェクト」がデプロイしたものが lp-consultation.vercel.app になります。  
いまプッシュは **cursor0113** にデプロイされており、**lp-consultation プロジェクト**には届いていません。  
「プッシュ → lp-consultation がビルド → 本番LPが更新」になるようにします。

---

### ★ lp-consultation にデプロイされるようにする（推奨）

**やりたいこと**: aimikata/cursor にプッシュしたら、**lp-consultation** プロジェクトがビルドし、lp-consultation.vercel.app が更新されるようにする。

**手順（Vercel で lp-consultation の Git 連携を aimikata/cursor にする）**

1. **Vercel ダッシュボード**を開く。
2. **lp-consultation** プロジェクトを開く（一覧で「lp-consultation」をクリック）。
3. **Settings** → **Git** を開く。
4. **Connected Git Repository** を確認する。
   - ここが **aimikata/cursor** になっていて、**Root Directory** が `lp-consultation` なら、プッシュで lp-consultation がビルドされます。
   - 別のリポジトリになっている場合：
     - **Change Repository** などで **aimikata/cursor** を選び直す。
     - または、**Disconnect** してから **Connect Git Repository** で **aimikata/cursor** を選び、Root Directory に `lp-consultation` を指定する。
5. **Root Directory** を `lp-consultation` に設定する（リポジトリ直下の `lp-consultation` フォルダをデプロイ元にする）。
6. 保存後、**Deployments** から **Redeploy** するか、aimikata/cursor の main に再度プッシュして、lp-consultation 用のビルドが走るか確認する。

これで「aimikata/cursor に push → lp-consultation がビルド → lp-consultation.vercel.app が更新」になります。

---

### パターンA：すでに lp-consultation が aimikata/cursor を参照している場合

- 上記「2」のプッシュができていれば、数分以内に **lp-consultation** プロジェクトがビルドされ、本番が更新される想定です。
- Deployments の一覧で、**プロジェクト名が lp-consultation** の行に、直近のコミット（例: 0c8064a）が出ているか確認してください。

### パターンB：lp-consultation が別リポジトリのままにする場合

lp-consultation プロジェクトを別リポジトリにしたまま运用するときは、**そのリポジトリ**に変更を反映する必要があります。

1. **lp-consultation の Git 連携を確認する**  
   Vercel → lp-consultation プロジェクト → Settings → Git → **Connected Git Repository** の名前・URLを確認。

2. **そのリポジトリに lp-consultation の内容を反映する**  
   - そのリポジトリをクローンし、`f:\AI\manga\cursor\lp-consultation\` の必要なファイル（少なくとも `index.html`）をコピーしてコミット＆プッシュする  
   - または、そのリポジトリをローカルで開き、`f:\AI\manga\cursor\lp-consultation\index.html` で上書きしてからコミット＆プッシュする  

3. **Root Directory** が、そのリポジトリのデプロイ元フォルダ（`lp-consultation` またはルート）になっているか確認する。

---

## 4. 反映したい内容（現状の cursor 内 lp-consultation）

このリポジトリの `lp-consultation/index.html` では、すでに次の状態になっています。

- **埋め込み動画**: 本編 `pCM2Dg3_iIk`（https://www.youtube.com/embed/pCM2Dg3_iIk）
- **ファーストビューのボタン**: 「仕組みのからくりを3分で確認する（無料）」

本番が別リポジトリの場合、上記と同じ内容を本番用リポジトリの `index.html`（または同等のファイル）に反映すれば、本番LPと揃えられます。

---

## 5. 困ったときの確認

### 「Redeploy しても変更できない」

**Redeploy** は「いま連携しているリポジトリのいまのコミット」を**そのまま**再ビルドするだけです。

- lp-consultation が **aimikata/cursor 以外**のリポジトリと連携している  
  → そのリポジトリには、手元の `lp-consultation/` の最新変更が入っていないため、Redeploy しても本番は変わりません。

**対処の選び方**

| やり方 | 手順 |
|--------|------|
| **A. lp-consultation の連携先を aimikata/cursor にする** | Vercel → lp-consultation → Settings → Git → **Connected Repository** を **aimikata/cursor** に変更し、**Root Directory** を `lp-consultation` に設定。保存後、Redeploy。これで aimikata/cursor の `lp-consultation/` がビルドされ、本番が更新される。 |
| **B. 今の連携先リポジトリに中身を送る** | Vercel の lp-consultation → Settings → Git で「どのリポジトリか」を確認。そのリポジトリをクローン or 開き、`f:\AI\manga\cursor\lp-consultation\` の **index.html** など必要なファイルをコピーしてコミット＆プッシュ。その後 Redeploy。 |

連携先を変えられるなら **A**、変えたくない／変えられないなら **B** で対応してください。

---

### 「Vercel の中のファイルが古いまま」

**状況**: 連携は aimikata/cursor、Root Directory も `lp-consultation` にしたが、本番に出ているのは古い内容のまま。

**よくある原因**

| 原因 | 対処 |
|------|------|
| **ビルドに使っているコミットが古い** | 手元から最新を push して、新しいデプロイを走らせる。 |
| **ビルドが失敗して、最後に成功した古いデプロイが表示されている** | Root Directory やブランチを直してビルドを成功させ、最新コミットで Redeploy する。 |
| **キャッシュ** | Redeploy で「Use existing Build Cache」をオフにしてやり直す。 |

**やること（優先順）**

1. **手元の lp-consultation を GitHub の最新にする**  
   `f:\AI\manga\cursor` で、未コミットの変更があれば  
   `git add lp-consultation/` → `git commit -m "lp-consultation: 最新に更新"` → `git push origin main`  
   push すると Vercel が自動で新しいデプロイを開始する。

2. **Vercel で「どのコミット」をビルドしているか確認**  
   Deployments → 最新のデプロイ → 詳細で **Commit / Branch** を確認。main の最新になっていなければ、Redeploy で main・最新を選び直す。

3. **ビルドキャッシュを外してやり直す**  
   Redeploy 時に「Use existing Build Cache」をオフにする（あれば）。

4. **Root Directory エラーでビルドが落ちている場合**  
   新しいビルドが失敗していると、表示は前回成功した古いデプロイのまま。  
   → GitHub の aimikata/cursor の **main** で、ルート直下に **lp-consultation** フォルダがあるか確認。  
   → Vercel の **Production Branch** が **main** か確認。  
   → **main の最新コミット**を指定して Redeploy する。

---

### そのほか

- **「git push は成功するが本番が変わらない」**  
  → 本番は別リポジトリと連携している可能性大。上記「Redeploy しても変更できない」の A または B で対応。

- **「lp-consultation が git status に一切出てこない」**  
  → リポジトリルートが `f:\AI\manga\cursor` か確認。別のフォルダで `git` を実行していると、lp-consultation が見えない場合があります。

- **「push 先が aimikata/cursor か不安」**  
  → `git remote -v` で表示される `origin` の URL が、目的の GitHub リポジトリ（aimikata/cursor）になっているか確認する。
